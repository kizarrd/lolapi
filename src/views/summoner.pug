include mixins/championrecord

doctype html 
html(lang="ko")
    head 
        title lol stats 
        //- link(rel="stylesheet" href="https://unpkg.com/mvp.css")
        link(rel="stylesheet" href="../styles.scss")
    body
        a(href="/") home
        form(method="GET").search__form
            input(placeholder="소환사 이름으로 검색" name="username_search" type="text")
            button 
                i.fas.fa-search 
        div.summoner
            if summoner
                div.summoner__basicInfo
                    h1#basicInfo__summoner-name(data-username=summoner.name) #{summoner.name}
                    img(src=`http://ddragon.leagueoflegends.com/cdn/11.18.1/img/profileicon/${summoner.profileIconId}.png` alt="profile icon" width="110" height="110")
                    h4 level: #{summoner.summonerLevel}
                    h3 Ranked Solo: #{user_db.soloRankTier} #{user_db.soloRankRank}
                    img(src=`https://opgg-static.akamaized.net/images/medals/${user_db.soloRankTier.toLowerCase()}_${user_db.soloRankRank}.png` alt="tier emblem" width="120" height="120")
                    span #{user_db.soloRankLeaguePoints}LP / #{user_db.soloRankWins}승 #{user_db.soloRankLoses}패
                div.summoner__update
                    div.update__lastUpdateTime
                        span#lastUpdateTime__converted=user_db.lastUpdateTime
                    button#update__button update

                div.summoner__championRecords
                    h2 Champions Played by #{summoner.name}
                    div.summoner__championRecords__table 
                        //- each championRecord in Object.fromEntries(user_db.championRecords11)
                        //-     +championrecord_format(championRecord)
                        each champPlayed in champion_records_sorted
                            +championrecord_format(user_db.championRecords11.get(champPlayed[0]))
                        else 
                            span.empty-message Champion records not found ❌
            else
                span the summoner is not not found

    script
        include ../lastUpdateTime.js
        include ../tableSort.js
        include ../update.js
    script(src="https://kit.fontawesome.com/9f340f31fc.js" crossorigin="anonymous")
